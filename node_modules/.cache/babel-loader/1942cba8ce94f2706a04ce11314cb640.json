{"remainingRequest":"/Users/maxinyu/Desktop/Vuex-SourceCode/node_modules/babel-loader/lib/index.js!/Users/maxinyu/Desktop/Vuex-SourceCode/src/vuex/module/module.collection.js","dependencies":[{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/src/vuex/module/module.collection.js","mtime":1639303895066},{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/babel.config.js","mtime":1639106845094},{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/node_modules/cache-loader/dist/cjs.js","mtime":1638500772549},{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/node_modules/babel-loader/lib/index.js","mtime":1638500772541}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvbWF4aW55dS9EZXNrdG9wL1Z1ZXgtU291cmNlQ29kZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9tYXhpbnl1L0Rlc2t0b3AvVnVleC1Tb3VyY2VDb2RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCBNb2R1bGUgZnJvbSAnLi9tb2R1bGUnOwppbXBvcnQgeyBmb3JFYWNoVmFsdWUgfSBmcm9tICcuLi91dGlscyc7Cgp2YXIgTW9kdWxlQ29sbGVjdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gTW9kdWxlQ29sbGVjdGlvbihyb290TW9kdWxlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kdWxlQ29sbGVjdGlvbik7CgogICAgdGhpcy5yb290ID0gbnVsbDsKICAgIHRoaXMucmVnaXN0ZXIocm9vdE1vZHVsZSwgW10pOyAvLyByb290ID0+IGEgYiBhPT5jCiAgfQoKICBfY3JlYXRlQ2xhc3MoTW9kdWxlQ29sbGVjdGlvbiwgW3sKICAgIGtleTogInJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcihyYXdNb2R1bGUsIHBhdGgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBuZXdNb2R1bGUgPSBuZXcgTW9kdWxlKHJhd01vZHVsZSk7CgogICAgICBpZiAocGF0aC5sZW5ndGggPT0gMCkgewogICAgICAgIC8v5piv5LiA5Liq5qC55qih5Z2XCiAgICAgICAgdGhpcy5yb290ID0gbmV3TW9kdWxlOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXJlbnQgPSBwYXRoLnNsaWNlKDAsIC0xKS5yZWR1Y2UoZnVuY3Rpb24gKG1vZHVsZSwgY3VycmVudCkgewogICAgICAgICAgcmV0dXJuIG1vZHVsZS5nZXRDaGlsZChjdXJyZW50KTsKICAgICAgICB9LCB0aGlzLnJvb3QpOwogICAgICAgIHBhcmVudC5hZGRDaGlsZChwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIG5ld01vZHVsZSk7CiAgICAgIH0KCiAgICAgIGlmIChyYXdNb2R1bGUubW9kdWxlcykgewogICAgICAgIGZvckVhY2hWYWx1ZShyYXdNb2R1bGUubW9kdWxlcywgZnVuY3Rpb24gKHJhd0NoaWxkTW9kdWxlLCBrZXkpIHsKICAgICAgICAgIF90aGlzLnJlZ2lzdGVyKHJhd0NoaWxkTW9kdWxlLCBwYXRoLmNvbmNhdChrZXkpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldE5hbWVzcGFjZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5hbWVzcGFjZWQocGF0aCkgewogICAgICB2YXIgbW9kdWxlID0gdGhpcy5yb290OyAvLyBbYSxjXQoKICAgICAgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChuYW1lc3BhY2VTdHIsIGtleSkgewogICAgICAgIG1vZHVsZSA9IG1vZHVsZS5nZXRDaGlsZChrZXkpOyAvL+WtkOaooeWdlwoKICAgICAgICByZXR1cm4gbmFtZXNwYWNlU3RyICsgKG1vZHVsZS5uYW1lc3BhY2VkID8ga2V5ICsgJy8nIDogJycpOwogICAgICB9LCAnJyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTW9kdWxlQ29sbGVjdGlvbjsKfSgpOwoKZXhwb3J0IHsgTW9kdWxlQ29sbGVjdGlvbiBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/Users/maxinyu/Desktop/Vuex-SourceCode/src/vuex/module/module.collection.js"],"names":["Module","forEachValue","ModuleCollection","rootModule","root","register","rawModule","path","newModule","length","parent","slice","reduce","module","current","getChild","addChild","modules","rawChildModule","key","concat","namespaceStr","namespaced"],"mappings":";;;;;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,SAASC,YAAT,QAA6B,UAA7B;;IACqBC,gB;AACjB,4BAAYC,UAAZ,EAAwB;AAAA;;AACpB,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKC,QAAL,CAAcF,UAAd,EAA0B,EAA1B,EAFoB,CAEU;AACjC;;;;WAED,kBAASG,SAAT,EAAoBC,IAApB,EAA0B;AAAA;;AACtB,UAAMC,SAAS,GAAG,IAAIR,MAAJ,CAAWM,SAAX,CAAlB;;AACA,UAAIC,IAAI,CAACE,MAAL,IAAe,CAAnB,EAAsB;AAAE;AACpB,aAAKL,IAAL,GAAYI,SAAZ;AACH,OAFD,MAEO;AACH,YAAME,MAAM,GAAGH,IAAI,CAACI,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,EAAkBC,MAAlB,CAAyB,UAACC,MAAD,EAASC,OAAT,EAAqB;AACzD,iBAAOD,MAAM,CAACE,QAAP,CAAgBD,OAAhB,CAAP;AACH,SAFc,EAEZ,KAAKV,IAFO,CAAf;AAGAM,QAAAA,MAAM,CAACM,QAAP,CAAgBT,IAAI,CAACA,IAAI,CAACE,MAAL,GAAc,CAAf,CAApB,EAAuCD,SAAvC;AACH;;AAED,UAAIF,SAAS,CAACW,OAAd,EAAuB;AACnBhB,QAAAA,YAAY,CAACK,SAAS,CAACW,OAAX,EAAoB,UAACC,cAAD,EAAiBC,GAAjB,EAAyB;AACrD,UAAA,KAAI,CAACd,QAAL,CAAca,cAAd,EAA8BX,IAAI,CAACa,MAAL,CAAYD,GAAZ,CAA9B;AACH,SAFW,CAAZ;AAGH;AACJ;;;WACD,uBAAcZ,IAAd,EAAoB;AAChB,UAAIM,MAAM,GAAG,KAAKT,IAAlB,CADgB,CACO;;AACvB,aAAOG,IAAI,CAACK,MAAL,CAAY,UAACS,YAAD,EAAeF,GAAf,EAAuB;AACtCN,QAAAA,MAAM,GAAGA,MAAM,CAACE,QAAP,CAAgBI,GAAhB,CAAT,CADsC,CACP;;AAC/B,eAAOE,YAAY,IAAIR,MAAM,CAACS,UAAP,GAAoBH,GAAG,GAAG,GAA1B,GAAgC,EAApC,CAAnB;AACH,OAHM,EAGJ,EAHI,CAAP;AAIH;;;;;;SA7BgBjB,gB","sourcesContent":["import Module from './module';\nimport { forEachValue } from '../utils'\nexport default class ModuleCollection {\n    constructor(rootModule) {\n        this.root = null;\n        this.register(rootModule, []) // root => a b a=>c\n    }\n\n    register(rawModule, path) {\n        const newModule = new Module(rawModule);\n        if (path.length == 0) { //是一个根模块\n            this.root = newModule\n        } else {\n            const parent = path.slice(0, -1).reduce((module, current) => {\n                return module.getChild(current)\n            }, this.root)\n            parent.addChild(path[path.length - 1], newModule)\n        }\n\n        if (rawModule.modules) {\n            forEachValue(rawModule.modules, (rawChildModule, key) => {\n                this.register(rawChildModule, path.concat(key))\n            })\n        }\n    }\n    getNamespaced(path) {\n        let module = this.root // [a,c]\n        return path.reduce((namespaceStr, key) => {\n            module = module.getChild(key); //子模块\n            return namespaceStr + (module.namespaced ? key + '/' : '')\n        }, '')\n    }\n}"]}]}