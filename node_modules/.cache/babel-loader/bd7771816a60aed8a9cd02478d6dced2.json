{"remainingRequest":"/Users/maxinyu/Desktop/Vuex-SourceCode/node_modules/babel-loader/lib/index.js!/Users/maxinyu/Desktop/Vuex-SourceCode/src/vuex/store.js","dependencies":[{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/src/vuex/store.js","mtime":1639308366316},{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/babel.config.js","mtime":1639106845094},{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/node_modules/cache-loader/dist/cjs.js","mtime":1638500772549},{"path":"/Users/maxinyu/Desktop/Vuex-SourceCode/node_modules/babel-loader/lib/index.js","mtime":1638500772541}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvbWF4aW55dS9EZXNrdG9wL1Z1ZXgtU291cmNlQ29kZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9tYXhpbnl1L0Rlc2t0b3AvVnVleC1Tb3VyY2VDb2RlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL21heGlueXUvRGVza3RvcC9WdWV4LVNvdXJjZUNvZGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuY3JlYXRlLmpzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgc3RvcmVLZXkgfSBmcm9tICcuL2luamVjdEtleSc7CmltcG9ydCBNb2R1bGVDb2xsZWN0aW9uIGZyb20gJy4vbW9kdWxlL21vZHVsZS5jb2xsZWN0aW9uJzsKaW1wb3J0IHsgZm9yRWFjaFZhbHVlLCBpc1Byb21pc2UgfSBmcm9tICcuL3V0aWxzJzsgLy/liJvlu7rkuIDkuKrlrrnlmajvvIzov5Tlm57kuIDkuKpzdG9yZQoKZnVuY3Rpb24gZ2V0TmVzdGVkU3RhdGUoc3RhdGUsIHBhdGgpIHsKICAvL+agueaNrui3r+W+hCDojrflj5ZzdG9yZeS4iumdoueahOeKtuaAgQogIHJldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbiAoc3RhdGUsIGtleSkgewogICAgcmV0dXJuIHN0YXRlW2tleV07CiAgfSwgc3RhdGUpOwp9CgpmdW5jdGlvbiBpbnN0YWxsTW9kdWxlKHN0b3JlLCByb290U3RhdGUsIHBhdGgsIG1vZHVsZSkgewogIHZhciBpc1Jvb3QgPSAhcGF0aC5sZW5ndGg7CgogIHZhciBuYW1lc3BhY2VkID0gc3RvcmUuX21vZHVsZXMuZ2V0TmFtZXNwYWNlZChwYXRoKTsKCiAgaWYgKCFpc1Jvb3QpIHsKICAgIHZhciBwYXJlbnRTdGF0ZSA9IHBhdGguc2xpY2UoMCwgLTEpLnJlZHVjZShmdW5jdGlvbiAoc3RhdGUsIGtleSkgewogICAgICByZXR1cm4gc3RhdGVba2V5XTsKICAgIH0sIHJvb3RTdGF0ZSk7CiAgICBwYXJlbnRTdGF0ZVtwYXRoW3BhdGgubGVuZ3RoIC0gMV1dID0gbW9kdWxlLnN0YXRlOwogIH0gLy9nZXR0ZXIgIG1vZHVsZS5fcmF3LmdldHRlcnMKCgogIG1vZHVsZS5mb3JFYWNoR2V0dGVyKGZ1bmN0aW9uIChnZXR0ZXIsIGtleSkgewogICAgc3RvcmUuX3dyYXBwZWRHZXR0ZXJzW25hbWVzcGFjZWQgKyBrZXldID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZ2V0dGVyKGdldE5lc3RlZFN0YXRlKHN0b3JlLnN0YXRlLCBwYXRoKSk7IC8v55u05o6l5L2/55So5qih5Z2X5LiK6Ieq5bex55qE54q25oCB77yIbW9kdWxlLnN0YXRl77yJ5LiN5piv5ZON5bqU5byP54q25oCBCiAgICB9OwogIH0pOyAvLyBtdXRhdGlvbiB7YWRkOlttdXRhdGlvbl19CgogIG1vZHVsZS5mb3JFYWNoTXV0YXRpb24oZnVuY3Rpb24gKG11dGF0aW9uLCBrZXkpIHsKICAgIHZhciBlbnRyeSA9IHN0b3JlLl9tdXRhdGlvbnNbbmFtZXNwYWNlZCArIGtleV0gfHwgKHN0b3JlLl9tdXRhdGlvbnNbbmFtZXNwYWNlZCArIGtleV0gPSBbXSk7CiAgICBlbnRyeS5wdXNoKGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgIG11dGF0aW9uLmNhbGwoc3RvcmUsIGdldE5lc3RlZFN0YXRlKHN0b3JlLnN0YXRlLCBwYXRoKSwgcGF5bG9hZCk7CiAgICB9KTsKICB9KTsgLy9hY3Rpb25zIOi/lOWbnuS4gOS4qnByb21pc2UKCiAgbW9kdWxlLmZvckVhY2hBY3Rpb24oZnVuY3Rpb24gKGFjdGlvbiwga2V5KSB7CiAgICB2YXIgZW50cnkgPSBzdG9yZS5fYWN0aW9uc1tuYW1lc3BhY2VkICsga2V5XSB8fCAoc3RvcmUuX2FjdGlvbnNbbmFtZXNwYWNlZCArIGtleV0gPSBbXSk7CiAgICBlbnRyeS5wdXNoKGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgIHZhciByZXMgPSBhY3Rpb24uY2FsbChzdG9yZSwgc3RvcmUsIHBheWxvYWQpOyAvLyByZXMg5piv5LiN5piv5LiA5LiqcHJvbWlzZQoKICAgICAgaWYgKCFpc1Byb21pc2UocmVzKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0pOwogIH0pOyAvL21vZHVsZXMKCiAgbW9kdWxlLmZvckVhY2hDaGlsZChmdW5jdGlvbiAoY2hpbGQsIGtleSkgewogICAgaW5zdGFsbE1vZHVsZShzdG9yZSwgcm9vdFN0YXRlLCBwYXRoLmNvbmNhdChrZXkpLCBjaGlsZCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHJlc2V0U3RvcmVTdGF0ZShzdG9yZSwgc3RhdGUpIHsKICBzdG9yZS5fc3RhdGUgPSByZWFjdGl2ZSh7CiAgICBkYXRhOiBzdGF0ZQogIH0pOyAvL3N0b3JlLl9zdGF0ZS5kYXRhID0gJ3h4eHgnCgogIHZhciB3cmFwcGVkR2V0dGVycyA9IHN0b3JlLl93cmFwcGVkR2V0dGVyczsKICBzdG9yZS5nZXR0ZXJzID0ge307CiAgZm9yRWFjaFZhbHVlKHdyYXBwZWRHZXR0ZXJzLCBmdW5jdGlvbiAoZ2V0dGVyLCBrZXkpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZS5nZXR0ZXJzLCBrZXksIHsKICAgICAgZ2V0OiBnZXR0ZXIsCiAgICAgIGVudW1lcmFibGU6IHRydWUKICAgIH0pOwogIH0pOwoKICBpZiAoc3RvcmUuc3RyaWN0KSB7CiAgICBlbmFibGVTdHJpY3RNb2RlKHN0b3JlKTsKICB9Cn0KCmZ1bmN0aW9uIGVuYWJsZVN0cmljdE1vZGUoc3RvcmUpIHsKICB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuX3N0YXRlLmRhdGE7CiAgfSwgZnVuY3Rpb24gKCkgewogICAgLy/nm5HmjqfmlbDmja7lj5jljJbvvIzmlbDmja7lj5jljJblkI7miafooYzlm57osIPlh73mlbAKICAgIGNvbnNvbGUuYXNzZXJ0KHN0b3JlLl9jb21taXR0aW5nLCAn5LiN5YWB6K645ZyobXV0YXRpb27kuYvlpJbmm7TmlLlzdGF0ZScpOwogIH0sIHsKICAgIGRlZXA6IHRydWUsCiAgICBmbHVzaDogJ3N5bmMnCiAgfSk7IC8v6buY6K6kd2F0Y2jmmK/lvILmraXnmoTvvIzmlLnkuLrlkIzmraXnm5HmjqcKfQoKdmFyIFN0b3JlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdG9yZShvcHRpb25zKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdG9yZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb21taXQiLCBmdW5jdGlvbiAodHlwZSwgcGF5bG9hZCkgewogICAgICB2YXIgZW50cnkgPSBfdGhpcy5fbXV0YXRpb25zW3R5cGVdIHx8IFtdOwoKICAgICAgX3RoaXMuX3dpdGhDb21taXR0aW5nKGZ1bmN0aW9uICgpIHsKICAgICAgICBlbnRyeS5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7CiAgICAgICAgICByZXR1cm4gaGFuZGxlcihwYXlsb2FkKTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBfdGhpcy5fc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7CiAgICAgICAgcmV0dXJuIHN1Yih7CiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgcGF5bG9hZDogcGF5bG9hZAogICAgICAgIH0sIF90aGlzLnN0YXRlKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRpc3BhdGNoIiwgZnVuY3Rpb24gKHR5cGUsIHBheWxvYWQpIHsKICAgICAgdmFyIGVudHJ5ID0gX3RoaXMuX2FjdGlvbnNbdHlwZV0gfHwgW107CiAgICAgIHJldHVybiBQcm9taXNlLmFsbChlbnRyeS5tYXAoZnVuY3Rpb24gKGhhbmRsZXIpIHsKICAgICAgICByZXR1cm4gaGFuZGxlcihwYXlsb2FkKTsKICAgICAgfSkpOwogICAgfSk7CgogICAgLy97c3RhdGUsYWN0aW9uLCBtdXRhdGlvbnMsZ2V0dGVycyxtb2R1bGVzfQogICAgdmFyIHN0b3JlID0gdGhpczsKICAgIHN0b3JlLl9tb2R1bGVzID0gbmV3IE1vZHVsZUNvbGxlY3Rpb24ob3B0aW9ucyk7IC8v5Y+R5biD6K6i6ZiF5qih5byP77yI5oqK5Ye95pWw5ZCN6K6i6ZiF5aW977yM55So5Ye95pWw5ZCN6L+b6KGM6Kem5Y+R77yJCgogICAgc3RvcmUuX3dyYXBwZWRHZXR0ZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIHN0b3JlLl9tdXRhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgc3RvcmUuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgc3RvcmUuc3RyaWN0ID0gb3B0aW9ucy5zdHJpY3QgfHwgZmFsc2U7IC8v5Lil5qC85qih5byPCiAgICAvL+WIpOaWreaYr+S4jeaYr+WQjOatpeeKtuaAgTptdXRhdGlvbuS5i+WJjea3u+WKoOS4gOS4queKtuaAge+8mmNvbW1pdHRpbmfvvJp0cnVlOwogICAgLy/osIPnlKhtdXRhdGlvbuaXtuabtOaUueeKtuaAge+8iGNvbW1pdGluZ++8mmZhbHNl77yJ77yM55uR5o6n6L+Z5Liq54q25oCBCiAgICAvLyDlpoLmnpzlvZPliY3nirbmgIHlj5jljJbnmoTml7blgJljb21taXRpbmcgPSB0cnVlID0+IOWQjOatpeabtOaUue+8m+WQpuWImeW8guatpeabtOaUuQoKICAgIHN0b3JlLl9jb21taXR0aW5nID0gZmFsc2U7CiAgICBzdG9yZS5fc3Vic2NyaWJlcnMgPSBbXTsgLy/lrprkuYnnirbmgIEKCiAgICB2YXIgc3RhdGUgPSBzdG9yZS5fbW9kdWxlcy5yb290LnN0YXRlOyAvL+agueeKtuaAgQoKICAgIGluc3RhbGxNb2R1bGUoc3RvcmUsIHN0YXRlLCBbXSwgc3RvcmUuX21vZHVsZXMucm9vdCk7CiAgICByZXNldFN0b3JlU3RhdGUoc3RvcmUsIHN0YXRlKTsKICAgIG9wdGlvbnMucGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgcmV0dXJuIHBsdWdpbihzdG9yZSk7CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhTdG9yZSwgW3sKICAgIGtleTogIl93aXRoQ29tbWl0dGluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3dpdGhDb21taXR0aW5nKGZuKSB7CiAgICAgIC8v5YiH54mH5pON5L2cCiAgICAgIHZhciBjb21taXR0aW5nID0gdGhpcy5fY29tbWl0dGluZzsKICAgICAgdGhpcy5fY29tbWl0dGluZyA9IHRydWU7CiAgICAgIGZuKCk7CiAgICAgIHRoaXMuX2NvbW1pdHRpbmcgPSBjb21taXR0aW5nOwogICAgfQogIH0sIHsKICAgIGtleTogInN1YnNjcmliZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlKGZuKSB7CiAgICAgIHRoaXMuX3N1YnNjcmliZXJzLnB1c2goZm4pOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RhdGUuZGF0YTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXBsYWNlU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZShuZXdTdGF0ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8v5Lil5qC85qih5byP5LiL5LiN6IO955u05o6l5L+u5pS554q25oCBCiAgICAgIHRoaXMuX3dpdGhDb21taXR0aW5nKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuX3N0YXRlLmRhdGEgPSBuZXdTdGF0ZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5zdGFsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5zdGFsbChhcHAsIGluamVjdEtleSkgewogICAgICBhcHAucHJvdmlkZShpbmplY3RLZXkgfHwgc3RvcmVLZXksIHRoaXMpOwogICAgICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHN0b3JlID0gdGhpczsKICAgIH0KICB9XSk7CgogIHJldHVybiBTdG9yZTsKfSgpOyAvL21vZHVsZeaWh+S7tuWkueS9nOeUqC9Nb2R1bGVDb2xsZWN0aW9u57G75L2c55SoCi8v5qC85byP5YyW55So5oi355qE5Y+C5pWw77yM5a6e546w5qC55o2u6Ieq5bex55qE6ZyA6KaB77yM5ZCO57ut5L2/55So5pe25pa55L6/Ci8vIHJvb3QgPSB7Ci8vICAgICBfcmF3OiByb290TW9kdWxlLAovLyAgICAgc3RhdGU6IHJvb3RNb2R1bGUuc3RhdGUsCi8vICAgICBfY2hpbGRyZW46IHsKLy8gICAgICAgICBhOiB7Ci8vICAgICAgICAgICAgIF9yYXc6IGFNb2R1bGUsCi8vICAgICAgICAgICAgIHN0YXRlOiBhTW9kdWxlLnN0YXRlLAovLyAgICAgICAgICAgICBfY2hpbGRyZW46IHt9Ci8vICAgICAgICAgfSwKLy8gICAgICAgICBiOiB7Ci8vICAgICAgICAgICAgIF9yYXc6IGJNb2R1bGUsCi8vICAgICAgICAgICAgIHN0YXRlOiBiTW9kdWxlLnN0YXRlLAovLyAgICAgICAgICAgICBfY2hpbGRyZW46IHt9Ci8vICAgICAgICAgfQovLyAgICAgfQovLyB9ICAgICAgIH0KLy8gICAgIH0KLy8gfQoKCmV4cG9ydCB7IFN0b3JlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/Users/maxinyu/Desktop/Vuex-SourceCode/src/vuex/store.js"],"names":["reactive","watch","storeKey","ModuleCollection","forEachValue","isPromise","getNestedState","state","path","reduce","key","installModule","store","rootState","module","isRoot","length","namespaced","_modules","getNamespaced","parentState","slice","forEachGetter","getter","_wrappedGetters","forEachMutation","mutation","entry","_mutations","push","payload","call","forEachAction","action","_actions","res","Promise","resolve","forEachChild","child","concat","resetStoreState","_state","data","wrappedGetters","getters","Object","defineProperty","get","enumerable","strict","enableStrictMode","console","assert","_committing","deep","flush","Store","options","type","_withCommitting","forEach","handler","_subscribers","sub","all","map","create","root","plugins","plugin","fn","committing","newState","app","injectKey","provide","config","globalProperties","$store"],"mappings":"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","sourcesContent":["import { reactive, watch } from 'vue'\nimport { storeKey } from './injectKey'\nimport ModuleCollection from './module/module.collection'\nimport { forEachValue, isPromise } from './utils'\n//创建一个容器，返回一个store\n\nfunction getNestedState(state, path) { //根据路径 获取store上面的状态\n    return path.reduce((state, key) => state[key], state)\n}\n\nfunction installModule(store, rootState, path, module) {\n    let isRoot = !path.length;\n\n    const namespaced = store._modules.getNamespaced(path)\n\n    if (!isRoot) {\n        let parentState = path.slice(0, -1).reduce((state, key) => state[key], rootState);\n        parentState[path[path.length - 1]] = module.state\n    }\n    //getter  module._raw.getters\n    module.forEachGetter((getter, key) => {\n            store._wrappedGetters[namespaced + key] = () => {\n                return getter(getNestedState(store.state, path)) //直接使用模块上自己的状态（module.state）不是响应式状态\n            }\n        })\n        // mutation {add:[mutation]}\n    module.forEachMutation((mutation, key) => {\n            const entry = store._mutations[namespaced + key] || (store._mutations[namespaced + key] = [])\n            entry.push((payload) => {\n                mutation.call(store, getNestedState(store.state, path), payload)\n            })\n        })\n        //actions 返回一个promise\n    module.forEachAction((action, key) => {\n            const entry = store._actions[namespaced + key] || (store._actions[namespaced + key] = []);\n            entry.push((payload) => {\n                let res = action.call(store, store, payload);\n                // res 是不是一个promise\n                if (!isPromise(res)) {\n                    return Promise.resolve(res);\n                }\n                return res;\n            })\n        })\n        //modules\n    module.forEachChild((child, key) => {\n        installModule(store, rootState, path.concat(key), child);\n    })\n}\n\nfunction resetStoreState(store, state) {\n    store._state = reactive({ data: state }); //store._state.data = 'xxxx'\n    const wrappedGetters = store._wrappedGetters;\n    store.getters = {};\n    forEachValue(wrappedGetters, (getter, key) => {\n        Object.defineProperty(store.getters, key, {\n            get: getter,\n            enumerable: true\n        })\n    })\n    if (store.strict) {\n        enableStrictMode(store)\n    }\n}\n\nfunction enableStrictMode(store) {\n    watch(() => store._state.data, () => { //监控数据变化，数据变化后执行回调函数\n            console.assert(store._committing, '不允许在mutation之外更改state')\n        }, { deep: true, flush: 'sync' }) //默认watch是异步的，改为同步监控\n}\n\n\nexport default class Store {\n\n    _withCommitting(fn) { //切片操作\n        const committing = this._committing;\n        this._committing = true;\n        fn()\n        this._committing = committing\n    }\n    constructor(options) {\n        //{state,action, mutations,getters,modules}\n        const store = this\n        store._modules = new ModuleCollection(options);\n        //发布订阅模式（把函数名订阅好，用函数名进行触发）\n        store._wrappedGetters = Object.create(null);\n        store._mutations = Object.create(null);\n        store._actions = Object.create(null);\n\n        store.strict = options.strict || false; //严格模式\n        //判断是不是同步状态:mutation之前添加一个状态：committing：true;\n        //调用mutation时更改状态（commiting：false），监控这个状态\n        // 如果当前状态变化的时候commiting = true => 同步更改；否则异步更改\n        store._committing = false;\n        store._subscribers = []\n            //定义状态\n        const state = store._modules.root.state; //根状态\n        installModule(store, state, [], store._modules.root)\n        resetStoreState(store, state)\n\n        options.plugins.forEach(plugin => plugin(store))\n\n    }\n    subscribe(fn) {\n        this._subscribers.push(fn)\n    }\n    get state() {\n        return this._state.data\n    }\n    commit = (type, payload) => {\n        const entry = this._mutations[type] || [];\n        this._withCommitting(() => {\n            entry.forEach(handler => handler(payload))\n        })\n        this._subscribers.forEach(sub => sub({ type, payload }, this.state))\n    }\n    dispatch = (type, payload) => {\n        const entry = this._actions[type] || [];\n        return Promise.all(entry.map(handler => handler(payload)))\n    }\n    replaceState(newState) {\n        //严格模式下不能直接修改状态\n        this._withCommitting(() => {\n            this._state.data = newState\n        })\n    }\n    install(app, injectKey) {\n        app.provide(injectKey || storeKey, this);\n        app.config.globalProperties.$store = this;\n    }\n}\n\n//module文件夹作用/ModuleCollection类作用\n//格式化用户的参数，实现根据自己的需要，后续使用时方便\n// root = {\n//     _raw: rootModule,\n//     state: rootModule.state,\n//     _children: {\n//         a: {\n//             _raw: aModule,\n//             state: aModule.state,\n//             _children: {}\n//         },\n//         b: {\n//             _raw: bModule,\n//             state: bModule.state,\n//             _children: {}\n//         }\n//     }\n// }       }\n//     }\n// }"]}]}